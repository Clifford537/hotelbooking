\documentclass[a4paper,12pt]{article}
\usepackage[utf8]{inputenc}
\usepackage{geometry}
\geometry{margin=1in}
\usepackage{booktabs}
\usepackage{enumitem}
\usepackage{datetime}
\usepackage{amsmath}
\usepackage{natbib}
\usepackage{parskip}
\setlength{\parindent}{0pt}

\begin{document}

\begin{center}
    \textbf{\Large Hotel Booking Receipt} \\
    \vspace{0.5cm}
    Booking ID: \textbf{\{{ booking.id }\}}
\end{center}

\section*{Booking Details}
\begin{tabular}{ll}
    \toprule
    \textbf{Field} & \textbf{Details} \\
    \midrule
    Check-in Date & \{{ booking.start_date }\} \\
    Check-out Date & \{{ booking.end_date }\} \\
    Number of Adults & \{{ booking.num_adults }\} \\
    Number of Children & \{{ booking.num_children }\} \\
    Total Price & KSh \{{ booking.total_price|stringformat:"0.2f" }\} \\
    VAT (18\%) & KSh \{{ booking.total_price|multiply:0.18|stringformat:"0.2f" }\} \\
    Booking Status & \{{ booking.booking_status }\} \\
    Payment Status & \{{ booking.payment_status|default:"Unpaid" }\} \\
    Created At & \{{ booking.created_at|date:"Y-m-d H:i" }\} \\
    \bottomrule
\end{tabular}

\section*{Room Details}
\begin{tabular}{ll}
    \toprule
    \textbf{Field} & \textbf{Details} \\
    \midrule
    Room Number & \{{ booking.room.room_number }\} \\
    Room Type & \{{ booking.room.room_type }\} \\
    Bed Type & \{{ booking.room.bed_type }\} \\
    Price per Night & KSh \{{ booking.room.price_per_night|stringformat:"0.2f" }\} \\
    Capacity & \{{ booking.room.capacity_adults }\} Adults, \{{ booking.room.capacity_children }\} Children \\
    \bottomrule
\end{tabular}

\section*{Guest Details}
\begin{itemize}[leftmargin=*]
    \item \textbf{Primary Guest}: \{{ booking.primary_guest.first_name }\} \{{ booking.primary_guest.last_name }\} (Adult, Email: \{{ booking.primary_guest.email|default:"N/A" }\}, Phone: \{{ booking.primary_guest.phone|default:"N/A" }\})
    {% for booking_guest in booking.booking_guests.all %}
        {% if booking_guest.guest != booking.primary_guest %}
    \item \{{ booking_guest.guest.first_name }\} \{{ booking_guest.guest.last_name }\} (\{{ booking_guest.is_child|yesno:"Child,Adult" }\}, Email: \{{ booking_guest.guest.email|default:"N/A" }\}, Phone: \{{ booking_guest.guest.phone|default:"N/A" }\})
        {% endif %}
    {% endfor %}
\end{itemize}

\section*{Meal Preferences}
{% for preference in booking.meal_preferences.all %}
    {% if preference.selected %}
\{{ preference.meal.name }\} (KSh \{{ preference.meal.price|stringformat:"0.2f" }\}) \\
    {% endif %}
{% empty %}
No meal preferences selected. \\
{% endfor %}

\end{document}